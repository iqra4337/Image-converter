<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Image Converter Tool</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #ff9a9e, #fad0c4);
      text-align: center;
      padding: 30px;
      color: #333;
    }
    h1 {
      color: #222;
      text-shadow: 2px 2px 5px #fff;
    }
    .container {
      background: #fff;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      max-width: 500px;
      margin: auto;
    }
    input, select, button {
      margin: 10px;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 16px;
    }
    button {
      background: #4CAF50;
      color: white;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background: #45a049;
    }
    canvas {
      display: none;
      margin-top: 20px;
      border: 2px solid #444;
    }
  </style>
</head>
<body>
  <h1>ðŸŽ¨ Image Converter & Resizer</h1>
  <div class="container">
    <input type="file" id="upload" accept="image/*"><br>

    <label>Choose Action:</label>
    <select id="action">
      <option value="jpg">Convert to JPG</option>
      <option value="png">Convert to PNG</option>
      <option value="resize">Resize</option>
      <option value="rotate">Rotate 90Â°</option>
      <option value="grayscale">Grayscale</option>
      <option value="compress">Compress (JPG)</option>
    </select><br>

    <label>Width:</label>
    <input type="number" id="width" placeholder="Width (for resize)">
    <label>Height:</label>
    <input type="number" id="height" placeholder="Height (for resize)"><br>

    <button onclick="processImage()">Process Image</button><br>
    <a id="download" style="display:none;" download="output.png">
      <button>Download Result</button>
    </a>
    <canvas id="canvas"></canvas>
  </div>

  <script>
    function processImage() {
      const file = document.getElementById('upload').files[0];
      if (!file) { alert("Please upload an image first!"); return; }

      const action = document.getElementById('action').value;
      const reader = new FileReader();
      reader.onload = function(event) {
        const img = new Image();
        img.onload = function() {
          const canvas = document.getElementById('canvas');
          const ctx = canvas.getContext('2d');

          let width = document.getElementById('width').value || img.width;
          let height = document.getElementById('height').value || img.height;

          if (action === "resize") {
            canvas.width = width;
            canvas.height = height;
            ctx.drawImage(img, 0, 0, width, height);
          } else if (action === "rotate") {
            canvas.width = img.height;
            canvas.height = img.width;
            ctx.save();
            ctx.translate(canvas.width / 2, canvas.height / 2);
            ctx.rotate(90 * Math.PI / 180);
            ctx.drawImage(img, -img.width / 2, -img.height / 2);
            ctx.restore();
          } else {
            canvas.width = img.width;
            canvas.height = img.height;
            ctx.drawImage(img, 0, 0);
          }

          if (action === "grayscale") {
            let imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            let data = imageData.data;
            for (let i = 0; i < data.length; i += 4) {
              let avg = (data[i] + data[i + 1] + data[i + 2]) / 3;
              data[i] = data[i + 1] = data[i + 2] = avg;
            }
            ctx.putImageData(imageData, 0, 0);
          }

          let mimeType = "image/png";
          if (action === "jpg" || action === "compress") mimeType = "image/jpeg";

          let quality = action === "compress" ? 0.5 : 1.0;
          const link = document.getElementById('download');
          link.href = canvas.toDataURL(mimeType, quality);
          link.style.display = "inline-block";
          document.getElementById('canvas').style.display = "block";
        };
        img.src = event.target.result;
      };
      reader.readAsDataURL(file);
    }
  </script>
</body>
</html>